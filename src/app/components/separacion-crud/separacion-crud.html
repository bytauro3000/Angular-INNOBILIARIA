<div class="contenedor-separaciones">
  <h1 id="titPrin" class="mb-4">Gestión de Separaciones</h1>

  <div class="filtros row g-2 mb-2">
    <div class="col-sm-3"><input type="text" class="form-control" placeholder="Manzana-Lote..." [(ngModel)]="manzLote" (input)="filtrarSeparaciones()"></div>
    <div class="col-sm-3"><input type="text" class="form-control" placeholder="DNI..." [(ngModel)]="dni" (input)="filtrarSeparaciones()"></div>
    <div class="col-sm-3"><input type="text" class="form-control" placeholder="Nombre..." [(ngModel)]="nomApe" (input)="filtrarSeparaciones()"></div>
    <div class="col-sm-3">
      <select class="form-select" [(ngModel)]="filtroEstado" (change)="filtrarSeparaciones()">
        <option value="">Todos</option>
        <option value="EN_PROCESO">EN PROCESO</option>
        <option value="CONCRETADO">CONCRETADO</option>
      </select>
    </div>
  </div>

  <div class="d-flex justify-content-end mb-3">
    <button class="btn btn-success btn-sm" (click)="mostrarCrear()">+ Crear separación</button>
  </div>

  <table class="table table-hover align-middle shadow-sm">
    <thead class="table-dark">
      <tr>
        <th>Id</th><th>DNI</th><th>Cliente</th><th>Manzana-Lote</th><th>Monto</th><th>Estado</th><th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let s of paginasSeparaciones">
        <td>{{s.idSeparacion}}</td>
        <td>{{s.dni}}</td>
        <td>{{s.nomApeCli}}</td>
        <td>{{s.manLote}}</td>
        <td>{{s.monto | currency:'PEN'}}</td>
        <td><span class="badge" [ngClass]="s.estadoSeparacion === 'EN_PROCESO' ? 'bg-warning text-dark' : 'bg-success'">{{s.estadoSeparacion}}</span></td>
        <td>
          <button class="btn btn-sm btn-primary me-1" (click)="mostrarEditar(s)"><i class="bi bi-pencil"></i></button>
          <button class="btn btn-sm btn-danger" (click)="eliminar(s)"><i class="bi bi-trash"></i></button>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<app-separacion-insert-edit #modalInsertEdit (operacionExitosa)="cargarDatos()"></app-separacion-insert-edit>