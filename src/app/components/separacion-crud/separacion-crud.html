<div class="contratos-container">
  <div class="filtros-header d-flex justify-content-between align-items-center">
    <h2>Gestión de Separaciones</h2>
    <button class="btn btn-nuevo" (click)="mostrarCrear()">
      + Nueva Separación
    </button>
  </div>

  <div class="tabla-wrapper">
    <table class="table-custom">
      <thead>
        <tr>
          <th style="width: 50px;">ID</th>
          <th>Cliente</th>
          <th>DNI/RUC</th>
          <th>Mz - Lt</th>
          <th>Vendedor</th>
          <th>F. Separación</th>
          <th>F. Límite</th>
          <th>Monto</th>
          <th>Estado</th>
          <th style="width: 120px;">Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let s of paginasSeparaciones">
          <td class="text-center">{{s.idSeparacion}}</td>
          
          <td>
            <div *ngFor="let c of s.clientes">
              {{ c.nombreCompleto }}
            </div>
          </td>
          
          <td class="text-center">
            <div *ngFor="let c of s.clientes">
              {{ c.numDoc }}
            </div>
          </td>

          <td class="text-center">
            <div *ngFor="let l of s.lotes">
              Mz. {{ l.manzana }} - Lt. {{ l.numeroLote }}
            </div>
          </td>

          <td>{{ s.nomVendedor }}</td>
          <td class="text-center">{{ s.fechaSepara | date:'dd/MM/yyyy' }}</td>
          <td class="text-center">{{ s.fechaLimite | date:'dd/MM/yyyy' }}</td>
          <td class="text-end">{{ s.monto | currency:'USD':'symbol':'1.2-2' }}</td>
          
          <td class="text-center">
            <span class="badge" [ngClass]="s.estadoSeparacion === 'EN_PROCESO' ? 'badge-warning' : 'badge-success'">
              {{ s.estadoSeparacion }}
            </span>
          </td>

          <td class="acciones-cell">
            <div class="acciones-container">
              <button class="btn-action btn-edit" (click)="mostrarEditar(s)" title="Editar">
                <i class="bi bi-pencil"></i>
              </button>
              <button class="btn-action btn-delete" (click)="eliminar(s)" title="Eliminar">
                <i class="bi bi-trash"></i>
              </button>
            </div>
          </td>
        </tr>
        
        <tr *ngIf="paginasSeparaciones.length === 0">
          <td colspan="10" class="no-data">No hay separaciones registradas.</td>
        </tr>
      </tbody>
    </table>
  </div>

  <div *ngIf="totalPages > 1" class="paginacion-simple">
    <button (click)="previousPage()" [disabled]="currentPage === 1">Anterior</button>
    <span class="page-info">Página {{currentPage}} de {{totalPages}}</span>
    <button (click)="nextPage()" [disabled]="currentPage === totalPages">Siguiente</button>
  </div>
</div>