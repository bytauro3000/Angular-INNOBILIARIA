<div class="letras-container">
  <h2 class="titulo">Letras de Cambio del Contrato #{{ idContrato }}</h2>

  <div class="filtros">
    <input type="text"
           placeholder="Número de letra..."
           [(ngModel)]="terminoBusqueda"
           (input)="filtrarLetras()"
           class="filtro-input">
  </div>

  <div *ngIf="cargando" class="mensaje-cargando">Cargando letras...</div>
  <div *ngIf="error" class="alerta-error">{{ error }}</div>

  <div class="tabla-letras">
    <table *ngIf="!cargando && paginatedLetras.length > 0">
      <thead>
        <tr>
          <th>#</th>
          <th>Número Letra</th>
          <th>Fecha Giro</th>
          <th>Fecha Vencimiento</th>
          <th>Importe</th>
          <th>Importe Texto</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let letra of paginatedLetras; let i = index">
          <td>{{ (currentPage - 1) * pageSize + i + 1 }}</td>
          <td>{{ letra.numeroLetra }}</td>
          <td>{{ letra.fechaGiro | date:'dd/MM/yyyy' }}</td>
          <td>{{ letra.fechaVencimiento | date:'dd/MM/yyyy' }}</td>
          <td>${{ letra.importe | number:'1.2-2' }}</td>
          <td>{{ letra.importeLetras }}</td>
        </tr>
      </tbody>
    </table>

    <div *ngIf="!cargando && paginatedLetras.length === 0" class="no-results">
      No se encontraron letras que coincidan con el número ingresado.
    </div>
  </div>

  <div *ngIf="totalPages > 1" class="paginacion-controles">
    <button (click)="previousPage()" [disabled]="currentPage === 1" class="pagina-btn">Anterior</button>

    <button *ngFor="let page of getPagesArray()"
            (click)="goToPage(page)"
            [class.active]="page === currentPage"
            class="pagina-numero-btn">
      {{ page }}
    </button>

    <button (click)="nextPage()" [disabled]="currentPage === totalPages" class="pagina-btn">Siguiente</button>
  </div>
</div>
